# UpServ
## Lightweight Golang Framework(Structure) for UP and SERV

This framework was designed and developed under 5 different not related projects. All the features I designed in these
projects was and will be implemented and added to this basic project.

**Disclaimer**:
_This framework available as-is, all future updates and fixes you may upgrade at your own risk, please read carefully all release notice and consider to use or not these updates._

## Usage and main ideology for writing code:
#### `Controllers`
This is the place for your business logic.
You got request struct IN and prepare response here using services as you source of data.
###

#### `Services`
This is a place to cache data, use storages, and make always related logic here.

For example, you want to send push
notification or email to user,
and you have multiple controllers
does this(registration, forgot password, reminders). Every time before send email you should find user email
first and then send email.  
This logic should be combined in a single service method and should look like
```SendEmail(ctx context.Context, userId int)``` and this method will load user email, and send it using storages.  
Basically this is the place controllers share in logic

###
#### `Storages`
DB, external API or some additional integration tools.
Here contains all Queries, or API usage,
email sending function, etc.
This shouldn't use cache it is your source of true.

### Structure short description:
    - config
       - config.go (application constants)

    - docs (autogenerated docs from swag. Included by default)

    - logger
        - logger.go (implementation of base logger)
        - access.go (implementation of logging access like nginx but with responses)

    - migrations (folder with migrations that will be used)
    
    - src
        - apperror (in app errors folder)
        - controllers
            - internal (main busines logic implementation)
            - controller.go (init and register new controllers)
        - handler (entry point, handlers for router. No busines logic)
        - http
            - middlewares
                - internal (implementation of middlewares)
                - middlewares.go (init middlewares)
            - request (folder for request models (implement IRequest))
                - request.go (request extract implementation)
            - response (folder for response models)
                - response.go (functions for responses)
        - service
            - cache (cache implementtation folder)
            - exporter (custom writen export to xls using response models)
            - internal (implementation of services)
            - mocks (mockary generated mocks)
            - service.go (init and register services)
        - storages
            - filter (folder to model storage filter models)
            - internal (folder to implement storage logic)
            - mocks (mockary generated mocks)
            - model (folder for models that used by storage)
            - storage.go (init and register storages)
        - util (all kind of helpers method across application)
        - router.go (routes implementation)
        - routes.go (routes definition added here)
    - config.ini (main application config)


### TODO:
- [ ] Describe config behavior
- [ ] Short describe mockery usage
- [ ] Short describe swagger usage
- [ ] Describe and fix CI

## Quick snippets
swag usage:  
`swag init -g main.go --parseInternal  -p snakecase --parseDependency`
mock usage:
`(cd src/service && mockery --all)`
`(cd src/storage && mockery --all)`

## Support
All bugs can be reported by creating issue here.  
All features or refactoring, improvement are welcome as pull requests.

## Contributors
[@bulkasmi](https://gitlab.com/bulkasmi)

## Roadmap
I will try to make some feature as a
libs to include in project and outside
for keeping it as simple as
it can be give it more flexibility with libs.

## Project status
Development will continue and change with more contributors or bugfixes.
Some major changes can be made to add some more flexibility.

## Licence
MIT License  
Free to use and extend

### Resources:

[Swagger](https://github.com/swaggo/swag) generator used in project     
[Mockery](https://github.com/vektra/mockery) for mocking Services, Storages for tests.



